<div hidden data-search-target="container" class="search-modal">
  <bridgetown-search-form class="search-modal__form">
    <div slot="input" style="max-width: 100%;">
      <sl-icon-button class="search-modal__close" name="arrow-left" label="Back"
                      data-action="click->search#hide"></sl-icon-button>

      <input id="top-nav-search" type="search" class="search-modal__input input">
      <sl-visually-hidden><label for="top-nav-search">Search for documentation</label></sl-visually-hidden>
    </div>
    <bridgetown-search-results class="search-modal__results"></bridgetown-search-results>
  </bridgetown-search-form>
</div>

<header class="nav-header">
  <nav class="top-nav" aria-label="Main">
    <div style="background: var(--sl-color-neutral-0); width: calc(100vw - env(safe-area-inset-right, 0) - env(safe-area-inset-left, 0)); position: absolute; left: -5vw; top: 0; height: 100%; z-index: -1;"></div>

    <sl-icon-button data-controller="side-nav" data-action="click->side-nav#open" class="top-nav__hamburger__button" name="list" label="Navigation"></sl-icon-button>

    <div class="top-nav__go-home">
      <%= render "logo" %>

      <%= render "version_number" %>
    </div>

    <div class="top-nav__search">
      <sl-icon-button class="top-nav__search__button" name="search" label="Search"
                      data-action="click->search#show">
      </sl-icon-button>

      <div class="top-nav__search__wrapper">
        <%= liquid_render "bridgetown_quick_search/search", placeholder: "Search...", input_class: "input top-nav__search__input" %>
        <kbd style="position: absolute; right: 0px; top: 50%; transform: translate(-50%, -50%); color: var(--sl-color-neutral-500); display: grid; grid-auto-flow: column; place-items: center; gap: 4px;">
          <span style="font-size: 1.25em;">âŒ˜</span>
          <span>K</span>
        </kbd>
      </div>
    </div>

    <div class="top-nav__links">
      <div class="top-nav__categories">
        <%= render "categories" %>
      </div>
      <a target="_blank" rel="noreferrer noopener" aria-label="Link to GitHub" href="<%= site.metadata.github_url %>" class="nav-link top-nav__github">
        <sl-icon name="github"></sl-icon>
      </a>
      <sl-dropdown style="margin-inline-start: 1rem; min-width: 48px;" data-controller="theme-switcher" aria-label="Change site theme">
        <sl-button slot="trigger" caret>
          <sl-icon id="light-theme__icon" name="sun"></sl-icon>
          <sl-icon hidden id="dark-theme__icon" name="moon-stars"></sl-icon>
          <sl-icon hidden id="auto-theme__icon" name="display"></sl-icon>
        </sl-button>
        <sl-menu>
          <sl-menu-label>
            Toggle <kbd>\</kbd>
          </sl-menu-label>

          <sl-divider></sl-divider>

          <sl-menu-item id="light-theme__menu-item" checked>
            <span class="theme-item">
              <sl-icon name="sun"></sl-icon>
              <span>Light</span>
            </span>
          </sl-menu-item>

          <sl-menu-item id="dark-theme__menu-item">
            <span class="theme-item">
              <sl-icon name="moon-stars"></sl-icon>
              <span>Dark</span>
            </span>
          </sl-menu-item>

          <sl-menu-item id="auto-theme__menu-item">
            <span class="theme-item">
              <sl-icon name="display"></sl-icon>
              <span>System</span>
            </span>
          </sl-menu-item>
        </sl-menu>
      </sl-dropdown>
    </div>
  </nav>
</header>
